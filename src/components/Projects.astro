---
interface Project {
  title: string;
  description: string;
  image: string;
  technologies: string[];
  githubUrl?: string;
  liveUrl?: string;
  featured?: boolean;
}

interface Props {
  projects: Project[];
}

const { projects } = Astro.props;
const featuredProjects = projects.filter(p => p.featured);
const regularProjects = projects.filter(p => !p.featured);
---

<section id="projects" class="section section-alt">
  <div class="container">
    <div class="projects-content fade-in">
      <div class="section-header">
        <h2>Proyectos Destacados</h2>
        <div class="section-divider"></div>
        <p class="section-description">
          Una selecci贸n de proyectos que demuestran mis habilidades y experiencia en desarrollo web
        </p>
      </div>
      
      {featuredProjects.length > 0 && (
        <div class="featured-projects">
          <h3>Proyectos Principales</h3>
          <div class="featured-grid">
            {featuredProjects.map((project) => (
              <div class="project-card featured-card">
                <div class="project-image">
                  <img 
                    src={project.image} 
                    alt={`Captura de pantalla del proyecto ${project.title}`}
                    loading="lazy"
                    width="600"
                    height="400"
                  />
                  <div class="image-overlay">
                    <div class="project-links">
                      {project.liveUrl && (
                        <a 
                          href={project.liveUrl} 
                          target="_blank" 
                          rel="noopener noreferrer" 
                          class="project-link"
                          aria-label={`Ver ${project.title} en vivo`}
                        >
                          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 13V19C18 20.1046 17.1046 21 16 21H5C3.89543 21 3 20.1046 3 19V8C3 6.89543 3.89543 6 5 6H11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M15 3H21V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M10 14L21 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                          </svg>
                          Ver Demo
                        </a>
                      )}
                      {project.githubUrl && (
                        <a 
                          href={project.githubUrl} 
                          target="_blank" 
                          rel="noopener noreferrer" 
                          class="project-link"
                          aria-label={`Ver c贸digo fuente de ${project.title} en GitHub`}
                        >
                          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 19C4 20.5 4 16.5 2 16M22 16V18.13C22 19.48 21.11 20.44 19.85 20.8L18 21.5C16.94 21.83 15.83 21.83 14.77 21.5L13 20.8C11.89 20.44 11 19.48 11 18.13V16M16 8C16.34 8.75 16.34 10.25 16 11C17.25 11 20 11 20 15C20 16.5 19.5 17.75 18.5 18.5C17.5 19.25 16.25 19.5 15 19.5H9C7.75 19.5 6.5 19.25 5.5 18.5C4.5 17.75 4 16.5 4 15C4 11 6.75 11 8 11C7.66 10.25 7.66 8.75 8 8C8.5 8 10 8.5 11 9.5C12 8.5 13.5 8 14 8C14.5 8 16 8.5 16 8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                          </svg>
                          C贸digo
                        </a>
                      )}
                    </div>
                  </div>
                </div>
                
                <div class="project-info">
                  <h4>{project.title}</h4>
                  <p>{project.description}</p>
                  
                  <div class="project-technologies">
                    {project.technologies.map((tech) => (
                      <span class="tech-badge">{tech}</span>
                    ))}
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>
      )}
      
      {regularProjects.length > 0 && (
        <div class="regular-projects">
          <h3>Otros Proyectos</h3>
          <div class="projects-grid">
            {regularProjects.map((project) => (
              <div class="project-card">
                <div class="project-image">
                  <img 
                    src={project.image} 
                    alt={`Captura de pantalla del proyecto ${project.title}`}
                    loading="lazy"
                    width="400"
                    height="300"
                  />
                  <div class="image-overlay">
                    <div class="project-links">
                      {project.liveUrl && (
                        <a 
                          href={project.liveUrl} 
                          target="_blank" 
                          rel="noopener noreferrer" 
                          class="project-link"
                          aria-label={`Ver ${project.title} en vivo`}
                        >
                          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18 13V19C18 20.1046 17.1046 21 16 21H5C3.89543 21 3 20.1046 3 19V8C3 6.89543 3.89543 6 5 6H11" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M15 3H21V9" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M10 14L21 3" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                          </svg>
                        </a>
                      )}
                      {project.githubUrl && (
                        <a 
                          href={project.githubUrl} 
                          target="_blank" 
                          rel="noopener noreferrer" 
                          class="project-link"
                          aria-label={`Ver c贸digo fuente de ${project.title} en GitHub`}
                        >
                          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 19C4 20.5 4 16.5 2 16M22 16V18.13C22 19.48 21.11 20.44 19.85 20.8L18 21.5C16.94 21.83 15.83 21.83 14.77 21.5L13 20.8C11.89 20.44 11 19.48 11 18.13V16M16 8C16.34 8.75 16.34 10.25 16 11C17.25 11 20 11 20 15C20 16.5 19.5 17.75 18.5 18.5C17.5 19.25 16.25 19.5 15 19.5H9C7.75 19.5 6.5 19.25 5.5 18.5C4.5 17.75 4 16.5 4 15C4 11 6.75 11 8 11C7.66 10.25 7.66 8.75 8 8C8.5 8 10 8.5 11 9.5C12 8.5 13.5 8 14 8C14.5 8 16 8.5 16 8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                          </svg>
                        </a>
                      )}
                    </div>
                  </div>
                </div>
                
                <div class="project-info">
                  <h4>{project.title}</h4>
                  <p>{project.description}</p>
                  
                  <div class="project-technologies">
                    {project.technologies.map((tech) => (
                      <span class="tech-badge">{tech}</span>
                    ))}
                  </div>
                </div>
              </div>
            ))}
          </div>
        </div>
      )}
    </div>
  </div>
</section>

<style>
  .projects-content {
    max-width: 1200px;
    margin: 0 auto;
  }
  
  .section-header {
    text-align: center;
    margin-bottom: var(--spacing-12);
  }
  
  .section-header h2 {
    color: var(--color-text);
    margin-bottom: var(--spacing-4);
  }
  
  .section-divider {
    width: 60px;
    height: 4px;
    background: linear-gradient(135deg, var(--color-primary), var(--color-accent));
    margin: 0 auto var(--spacing-4);
    border-radius: var(--radius-sm);
  }
  
  .section-description {
    color: var(--color-text-light);
    font-size: var(--font-size-lg);
    max-width: 700px;
    margin: 0 auto;
  }
  
  .featured-projects,
  .regular-projects {
    margin-bottom: var(--spacing-12);
  }
  
  .featured-projects h3,
  .regular-projects h3 {
    color: var(--color-text);
    font-size: var(--font-size-2xl);
    margin-bottom: var(--spacing-8);
    text-align: center;
  }
  
  .featured-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--spacing-8);
  }
  
  .projects-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: var(--spacing-6);
  }
  
  .project-card {
    background: var(--color-background);
    border-radius: var(--radius-xl);
    overflow: hidden;
    box-shadow: var(--shadow-md);
    transition: all var(--transition-normal);
    border: 1px solid var(--color-border);
  }
  
  .project-card:hover {
    box-shadow: var(--shadow-xl);
    transform: translateY(-4px);
  }
  
  .featured-card {
    display: grid;
    grid-template-columns: 1fr 1fr;
    align-items: center;
    min-height: 400px;
  }
  
  .featured-card:nth-child(even) {
    direction: rtl;
  }
  
  .featured-card:nth-child(even) .project-info {
    direction: ltr;
  }
  
  .project-image {
    position: relative;
    overflow: hidden;
    background: var(--color-background-alt);
  }
  
  .featured-card .project-image {
    height: 100%;
  }
  
  .project-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform var(--transition-slow);
  }
  
  .project-card:hover .project-image img {
    transform: scale(1.05);
  }
  
  .image-overlay {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: rgba(37, 99, 235, 0.9);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity var(--transition-normal);
  }
  
  .project-card:hover .image-overlay {
    opacity: 1;
  }
  
  .project-links {
    display: flex;
    gap: var(--spacing-4);
  }
  
  .project-link {
    display: flex;
    align-items: center;
    gap: var(--spacing-2);
    padding: var(--spacing-3) var(--spacing-4);
    background: rgba(255, 255, 255, 0.2);
    color: white;
    border-radius: var(--radius-lg);
    text-decoration: none;
    font-weight: 500;
    transition: all var(--transition-fast);
    backdrop-filter: blur(10px);
  }
  
  .project-link:hover {
    background: rgba(255, 255, 255, 0.3);
    transform: translateY(-2px);
  }
  
  .project-info {
    padding: var(--spacing-6);
  }
  
  .project-info h4 {
    color: var(--color-text);
    font-size: var(--font-size-xl);
    font-weight: 600;
    margin-bottom: var(--spacing-3);
  }
  
  .project-info p {
    color: var(--color-text-light);
    line-height: 1.6;
    margin-bottom: var(--spacing-4);
  }
  
  .project-technologies {
    display: flex;
    flex-wrap: wrap;
    gap: var(--spacing-2);
  }
  
  .tech-badge {
    display: inline-flex;
    align-items: center;
    padding: var(--spacing-1) var(--spacing-3);
    background: var(--color-background-alt);
    color: var(--color-primary);
    border-radius: var(--radius-lg);
    font-size: var(--font-size-sm);
    font-weight: 500;
    border: 1px solid var(--color-border);
  }
  
  /* Responsive design */
  @media (max-width: 968px) {
    .featured-card {
      grid-template-columns: 1fr;
      min-height: auto;
    }
    
    .featured-card:nth-child(even) {
      direction: ltr;
    }
    
    .featured-card .project-image {
      height: 250px;
    }
    
    .projects-grid {
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
    }
  }
  
  @media (max-width: 768px) {
    .section-header {
      margin-bottom: var(--spacing-8);
    }
    
    .section-description {
      font-size: var(--font-size-base);
    }
    
    .featured-projects,
    .regular-projects {
      margin-bottom: var(--spacing-8);
    }
    
    .project-info {
      padding: var(--spacing-4);
    }
    
    .project-info h4 {
      font-size: var(--font-size-lg);
    }
    
    .projects-grid {
      grid-template-columns: 1fr;
      gap: var(--spacing-4);
    }
    
    .project-links {
      gap: var(--spacing-2);
    }
    
    .project-link {
      padding: var(--spacing-2) var(--spacing-3);
      font-size: var(--font-size-sm);
    }
  }
  
  @media (max-width: 480px) {
    .featured-card .project-image {
      height: 200px;
    }
    
    .project-technologies {
      gap: var(--spacing-1);
    }
    
    .tech-badge {
      font-size: var(--font-size-xs);
      padding: 2px var(--spacing-2);
    }
  }
  
  /* Reduced motion */
  @media (prefers-reduced-motion: reduce) {
    .project-card:hover {
      transform: none;
    }
    
    .project-card:hover .project-image img {
      transform: none;
    }
    
    .project-link:hover {
      transform: none;
    }
  }
</style>
